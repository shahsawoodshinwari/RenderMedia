const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MazBadge.AdlIDWRs-DwFEYnKK.js","assets/index-D2n6yODw.js","assets/index-DV88t5Um.css","assets/index-CHRVgr6m.js","assets/MazBadge-CIY0hr5U.css"])))=>i.map(i=>d[i]);
import{k as N,l as _,p as I,C as H,o as c,c as v,y as C,D as J,E as F,m as q,a,n as h,s as O,F as $,i as j,e as z,t as f,z as T,f as w,G as K,d as X,H as E,I as Y,J as Z,w as Q,K as ee,T as te,_ as D,L as oe,r as k,b as L}from"./index-D2n6yODw.js";import{u as R}from"./index-CHRVgr6m.js";const se={class:"m-tabs m-reset-css"},ne=N({__name:"MazTabs",props:{modelValue:{}},emits:["update:model-value"],setup(o,{emit:e}){const t=o,n=e,l=_(1),m=I({get:()=>t.modelValue??l.value,set:i=>{l.value=i,n("update:model-value",i)}});function u(i){return m.value=i,i}return H("maz-tabs",{currentTab:m,updateCurrentTab:u}),(i,p)=>(c(),v("div",se,[C(i.$slots,"default")]))}});function ae(o){return new Promise(e=>setTimeout(e,o))}function le(o,e){const t=E(o,e);if(!t)throw new TypeError(`[maz-ui](injectStrict) Could not resolve ${o.toString()}`);return t}const ie=["disabled","onClick"],re=N({__name:"MazTabsBar",props:{items:{},persistent:{type:Boolean},queryParam:{default:"tab"},block:{type:Boolean},noElevation:{type:Boolean},autoScroll:{type:Boolean,default:!0}},setup(o){const e=o,t=Y(()=>Z(()=>import("./MazBadge.AdlIDWRs-DwFEYnKK.js"),__vite__mapDeps([0,1,2,3,4]))),{currentTab:n,updateCurrentTab:l}=le("maz-tabs");function m(s){l(s+1),e.persistent&&U(s+1)}const u=_(),i=_([]);function p(s){return n.value===s+1}function x({mazBtn:s,index:r}){i.value[r]=s&&"$el"in s?s.$el:s}const y=I(()=>e.items.map(s=>({label:typeof s=="string"?s:s.label,disabled:typeof s=="string"?!1:s.disabled??!1,badge:typeof s=="string"?void 0:s.badge}))),B=_(),b=_(!1);async function M(){if(!e.autoScroll)return;await ae(150);const s=u.value,r=i.value[n.value-1];if(!s||!r)return;const d=50;if(r.offsetLeft-d<s.scrollLeft||r.offsetLeft+r.offsetWidth>s.scrollLeft+s.clientWidth){const A=window.getComputedStyle(s,"padding-left").paddingLeft,G=Number(A.slice(0,-2));s.scrollTo({left:r.offsetLeft-G-d,behavior:b.value?"smooth":"instant"})}if(typeof n.value!="number")return;const g=(r==null?void 0:r.offsetWidth)??0,S=(r==null?void 0:r.offsetHeight)??0,W=(r==null?void 0:r.offsetLeft)??0;B.value={transform:`translateX(${W}px)`,width:`${g}px`,height:`${S}px`},b.value=!0}function P(s,r){return r?{}:n.value===s+1?"color: var(--maz-color-text)":"color: var(--maz-color-muted)"}J(()=>{(n.value<1||n.value>y.value.length)&&console.error(`[maz-ui](MazTabsBar) The model-value should be between 1 and ${y.value.length}`)}),F(()=>{(e.persistent||n.value)&&M()}),q(()=>[n.value,y.value],()=>{M()});function V(){const s=new URL(window.location.href);return Number(s.searchParams.get(e.queryParam))}function U(s){const r=new URL(window.location.href);r.searchParams.set(e.queryParam,String(s)),window.history.replaceState({},document.title,r.toString())}return F(()=>{e.persistent&&l(V()||n.value||1)}),(s,r)=>(c(),v("div",{ref_key:"tabsBarRef",ref:u,class:h(["m-tabs-bar m-reset-css",{"--block":s.block,"--elevation":!s.noElevation}])},[a("div",{class:h(["m-tabs-bar__indicator",{"--animated":b.value}]),style:O([B.value])},null,6),(c(!0),v($,null,j(y.value,(d,g)=>(c(),v("button",{key:g,ref_for:!0,ref:S=>x({mazBtn:S,index:g}),class:h([{"--active":p(g),"--disabled":d.disabled},"m-tabs-bar__item"]),disabled:d.disabled,style:O(P(g,d.disabled)),onClick:S=>d.disabled?void 0:m(g)},[C(s.$slots,"item",{item:d,active:p(g),index:g},()=>[z(f(d.label)+" ",1),d.badge?(c(),T(K(t),{key:0,color:d.badge.color,pastel:d.badge.pastel,outline:d.badge.outline,"rounded-size":d.badge.roundedSize,size:d.badge.size??"0.7rem",class:"m-tabs-bar__item__badge"},{default:w(()=>[C(s.$slots,"badge-content",{content:d.badge.content},()=>[z(f(d.badge.content),1)],!0)]),_:2},1032,["color","pastel","outline","rounded-size","size"])):X("v-if",!0)],!0)],14,ie))),128))],2))}}),de=(o,e)=>{const t=o.__vccOpts||o;for(const[n,l]of e)t[n]=l;return t},ce=de(re,[["__scopeId","data-v-004686b3"]]),ue="/assets/no-bookings-found-BluZXIsf.png";function be(o,e){let t;return function(...n){clearTimeout(t),t=setTimeout(()=>{o.apply(this,n)},e)}}function me(o,e){const t=E(o,e);if(!t)throw new TypeError(`[maz-ui](injectStrict) Could not resolve ${o.toString()}`);return t}const fe=N({__name:"MazTabsContent",setup(o){const e=_(!1),{currentTab:t}=me("maz-tabs"),n=be(()=>{e.value=!1},700);function l(){e.value=!0,n()}return q(()=>t.value,()=>l(),{immediate:!0}),(m,u)=>(c(),v("div",{class:h(["m-tabs-content m-reset-css maz-relative",{"maz-overflow-hidden":e.value}])},[C(m.$slots,"default")],2))}});function ve(o,e){const t=E(o,e);if(!t)throw new TypeError(`[maz-ui](injectStrict) Could not resolve ${o.toString()}`);return t}const pe=N({__name:"MazTabsContentItem",props:{tab:{type:Number,required:!0}},setup(o){const e=o,t=_("maz-tab-transition"),n=_(),{currentTab:l}=ve("maz-tabs");q(()=>l.value,(i,p)=>{if(typeof i=="number"&&typeof p=="number"){const x=p<i;t.value=x?"maz-tab-transition":"maz-tab-reverse-transition"}},{immediate:!0});const m=I(()=>e.tab-1),u=I(()=>l.value-1===m.value);return(i,p)=>(c(),T(te,{name:t.value,persisted:""},{default:w(()=>[Q(a("div",{ref_key:"MazTabsContentItem",ref:n,class:"m-tabs-content-item m-reset-css"},[C(i.$slots,"default",{},void 0,!0)],512),[[ee,u.value]])]),_:3},8,["name"]))}}),ge=(o,e)=>{const t=o.__vccOpts||o;for(const[n,l]of e)t[n]=l;return t},_e=ge(pe,[["__scopeId","data-v-89ecbfa6"]]),he={name:"BookingDetailsCard",props:{booking:{type:Object,required:!0}},data(){return{form:R("post","/bookings",{})}},methods:{paymentClass(o){switch(o==null?void 0:o.toLowerCase()){case"paid":return"text-bg-success";case"partial":return"text-bg-warning";case"unpaid":return"text-bg-danger";default:return"text-bg-secondary"}},reschedule(){this.form.submit().then(o=>{console.log(o)})}}},ye={class:"card text-dark bg-white rounded-4 border-0"},ke={class:"card-body px-2"},we={class:"row g-3 justify-content-end align-items-center"},xe={class:"col-6"},ze={class:"rounded-pill py-1 px-3 bg-light"},Te={class:"col-6"},Ce={class:"rounded-pill py-1 px-3 bg-light"},Be={class:"col-12"},Me={class:"fw-bold fs-6"},Se={class:"col"},Le={class:"flex-grow-1 fs-small"},$e={class:"flex-grow-1 fs-small"},Ie={class:"col-auto fs-small"},Ne={class:"text-danger fw-medium py-1"},Pe={class:"col-6"};function Ve(o,e,t,n,l,m){var u,i;return c(),v("div",ye,[a("div",ke,[a("div",we,[a("div",xe,[a("div",ze,[e[0]||(e[0]=a("b",null,"Service:",-1)),z(" "+f((u=t.booking.category)==null?void 0:u.title),1)])]),a("div",Te,[a("div",Ce,[e[1]||(e[1]=a("b",null,"Short For:",-1)),z(" "+f((i=t.booking.sub_category)==null?void 0:i.title),1)])]),a("div",Be,[a("div",Me,f(t.booking.address),1)]),a("div",Se,[a("div",Le,f(t.booking.date),1),a("div",$e,f(t.booking.time),1)]),a("div",Ie,[z(" Booking Id: #"+f(t.booking.booking_id)+" ",1),a("div",Ne,"Request: "+f(t.booking.request_status),1)]),e[2]||(e[2]=a("div",{class:"col-6"},[a("button",{class:h(["btn","py-1","px-3","rounded-pill","fs-small","btn-primary"])},[a("span",null,"Reschedule")])],-1)),a("div",Pe,[a("div",{class:h(["rounded-pill","py-1","px-3","fs-small",m.paymentClass(t.booking.payment_status)])}," Payment: "+f(t.booking.payment_status),3)])])])])}const je=D(he,[["render",Ve],["__scopeId","data-v-d35b9bbf"]]),qe={},Ee={class:"pt-3 mb-3"};function De(o,e){return c(),v("div",Ee,e[0]||(e[0]=[oe('<div class="card text-dark bg-white rounded-4 border-0"><div class="card-body px-2"><div class="row g-3 justify-content-end align-items-center placeholder-glow"><div class="col-6"><div class="rounded-pill py-1 bg-light"><div class="placeholder col-12 rounded-4 mb-2" style="height:20px;"></div></div></div><div class="col-6"><div class="rounded-pill py-1 bg-light"><div class="placeholder col-12 rounded-4 mb-2" style="height:20px;"></div></div></div><div class="col-12"><div class="fw-bold fs-6"><div class="placeholder col-12 rounded-4 mb-2" style="height:20px;"></div></div></div><div class="col"><div class="flex-grow-1 fs-small"><div class="placeholder col-12 rounded-4 mb-2" style="height:15px;"></div></div><div class="flex-grow-1 fs-small"><div class="placeholder col-12 rounded-4 mb-2" style="height:15px;"></div></div></div><div class="col-auto fs-small"><div class="placeholder col-12 rounded-4 mb-2" style="height:15px;"></div><div class="text-danger fw-medium py-1"><div class="placeholder col-12 rounded-4 mb-2" style="height:15px;"></div></div></div><div class="col-6"><div class="placeholder col-12 rounded-4 mb-2" style="height:40px;"></div></div><div class="col-6"><div class="rounded-pill py-1 px-3 fs-small"><div class="placeholder col-12 rounded-4 mb-2" style="height:15px;"></div></div></div></div></div></div>',1)]))}const Fe=D(qe,[["render",De]]),Oe={name:"BookingList",components:{MazTabs:ne,MazTabsBar:ce,MazTabsContent:fe,BookingDetailsCard:je,MazTabsContentItem:_e,BookingCardSkeleton:Fe},data(){return{tabs:[{id:1,bookings:[],label:"Ongoing"},{id:2,bookings:[],label:"Upcoming"},{id:3,bookings:[],label:"Completed"}],currentTab:1,form:R("get","/bookings",{}),notFound:ue}},mounted(){this.fetchBookings()},methods:{fetchBookings(){this.form.submit().then(o=>{const e=o.data.data;this.tabs[0].bookings=e.filter(t=>{var l;const n=(l=t.request_status)==null?void 0:l.toLowerCase();return n!=="pending"&&n!=="completed"}),this.tabs[2].bookings=e.filter(t=>{var n;return((n=t.request_status)==null?void 0:n.toLowerCase())=="pending"}),this.tabs[2].bookings=e.filter(t=>{var n;return((n=t.request_status)==null?void 0:n.toLowerCase())=="completed"})})}}},Re={class:h(["flex-grow-1","py-3","bg-primary"])},Ue={key:1,class:"text-center"},We=["src"];function Ae(o,e,t,n,l,m){const u=k("MazTabsBar"),i=k("BookingCardSkeleton"),p=k("BookingDetailsCard"),x=k("MazTabsContentItem"),y=k("MazTabsContent"),B=k("MazTabs");return c(),T(B,{modelValue:l.currentTab,"onUpdate:modelValue":e[0]||(e[0]=b=>l.currentTab=b)},{default:w(()=>[L(u,{items:l.tabs,persistent:!0,block:!0,class:"rounded-pill justify-content-between p-0 booking-tabs"},{default:w(({item:b})=>[a("div",Re,f(b.label),1)]),_:1},8,["items"]),L(y,null,{default:w(()=>[l.form.processing?(c(),v($,{key:0},[L(i),L(i)],64)):(c(!0),v($,{key:1},j(l.tabs,(b,M)=>(c(),T(x,{tab:b.id,id:b.id,key:M,class:"py-4"},{default:w(()=>[b.bookings.length>0?(c(!0),v($,{key:0},j(b.bookings,(P,V)=>(c(),T(p,{key:V,booking:P},null,8,["booking"]))),128)):(c(),v("div",Ue,[a("img",{src:l.notFound,class:"img-fluid w-50 mb-3",alt:"No bookings found"},null,8,We),e[1]||(e[1]=a("div",{class:"fs-4 text-muted"},"No bookings found",-1)),e[2]||(e[2]=a("div",{class:"fs-6 text-secondary"},"We couldn't find any bookings at the moment.",-1))]))]),_:2},1032,["tab","id"]))),128))]),_:1})]),_:1},8,["modelValue"])}const Ge=D(Oe,[["render",Ae]]),Ke=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"}));export{Ke as B,de as Y};
